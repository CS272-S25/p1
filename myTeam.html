<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Teams | UW Madison Intramural Sports</title>
  <link rel="stylesheet" href="style.css" /> 
</head>

<body>
  
    <header>
    <h1>My Teams</h1> <!--Main Heading(Stefan M)-->
    <nav> <!--Nav Bar should be the same as rest of navbars(Stefan M)-->
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="teams.html">Team Registration</a></li>
        <li><a href="schedule.html">Schedule</a></li>
        <li><a href="myTeam.html">My Team</a></li>
        <li><a href="admin.html">Admin Page</a></li>
      </ul>
    </nav>
  </header>

  <main> <!--Main content for this page(Stefan M)-->
    <h2>Teams You're Part Of</h2>
    <!--Input area for user to type name and search for team(Stefan M)-->
    <input type="text" id="userNameInput" placeholder="Enter your name" /> 
    
    <!--This button starts function to display teams for that user(Stefan M)-->
    <button onclick="loadUserTeams()">View My Teams</button>
    
    <!--List that is filled with user's team by using js(Stefan M)-->
    <ul id="userTeamsList"></ul>
  </main>

  <footer> <!--Footer should be on all pages(Stefan M)-->
    <p>&copy; 2025 UW-Madison | Group 1</p>
  </footer>

  <script src="script.js"></script> <!--JS link should be on all pages that use js as well(Stefan M)-->
</body>
</html>

<script> //custom JS for myTeam

//loads and shows all the teams that the user is part of
  function loadUserTeams() {
    const userName = document.getElementById("userNameInput").value.trim();// This gets the user's name
    const userList = document.getElementById("userTeamsList");// This the userlist that displays the teams
    const teams = getTeams(); //this loads all the teams
  
    userList.innerHTML = ""; //this clears the previous results from other users
  
    //This loops through each team and checks if the user is a member in the list
    for (const [teamName, data] of Object.entries(teams)) {
      if (data.members.includes(userName)) {
        const li = document.createElement("li"); //This creates a list item 
        li.innerHTML = `<strong>${teamName}</strong> (${data.sport})
          <button onclick="leaveTeam('${teamName}', '${userName}')">Leave</button>`; //This includes the leave button
        userList.appendChild(li);
      }
    }
  }
  
  //This removes the user from the selected team 
  function leaveTeam(teamName, userName) {
    const teams = getTeams();
    if (teams[teamName]) {
      teams[teamName].members = teams[teamName].members.filter(m => m !== userName); //This removes the member 
      saveTeams(teams); //This will save the updated made
      loadUserTeams(); //This will refresh the list after
    }
  }
  </script>